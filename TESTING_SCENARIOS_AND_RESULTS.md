# Тестілеу сценарийлері мен нәтижелері
## Testing Scenarios and Results

**Жоба:** Виртуальный помощник для интерактивного изучения казахского языка  
**Күні:** 2025-02-07  
**Әдіс:** Black-box тестілеу (API, браузер)

---

## 1. Аутентификация (Auth)

### 1.1 Регистрация

| # | Сценарий | Кіру деректері | Күтілетін нәтиже | Нәтиже |
|---|----------|----------------|------------------|--------|
| A1 | Жаңа пайдаланушы тіркелуі | email, password, full_name | 201, JWT токен | ✅ |
| A2 | Бос email | email="" | 422 Validation Error | ✅ |
| A3 | Қысқа пароль | password="123" | 422 Validation Error | ✅ |
| A4 | Бар email қайта тіркелуі | қолданылған email | 400 Conflict | ✅ |

### 1.2 Кіру

| # | Сценарий | Кіру деректері | Күтілетін нәтиже | Нәтиже |
|---|----------|----------------|------------------|--------|
| A5 | Дұрыс логин/пароль | admin@example.com / admin123 | 200, access_token | ✅ |
| A6 | Қате пароль | admin@example.com / wrong | 401 Unauthorized | ✅ |
| A7 | Жоқ email | unknown@mail.com / pass | 401 Unauthorized | ✅ |
| A8 | JWT жоқ API шақыруы | Authorization: жоқ | 401 Unauthorized | ✅ |

---

## 2. Уроки (Lessons)

### 2.1 API сценарийлері

| # | Сценарий | Эндпоинт | Күтілетін | Нәтиже |
|---|----------|----------|-----------|--------|
| L1 | Уроктар тізімін алу | GET /api/lessons/ | 200, массив | ✅ |
| L2 | Урок ID бойынша алу | GET /api/lessons/1 | 200, lesson объекті | ✅ |
| L3 | prerequisite бұған жоқ урок | GET /api/lessons/50 (locked) | 403 | ✅ |
| L4 | Урокты аяқтау | POST /api/lessons/1/complete | 200 (егер prerequisite орындалса) | ✅ |
| L5 | Итоговый тестсыз аяқтау | POST complete (тест жоқ урок үшін) | 200 | ✅ |
| L6 | Итоговый тестті аяқтамай аяқтау | POST complete (тест бар, сдан емес) | 400 | ✅ |

### 2.2 UI сценарийлері

| # | Сценарий | Қадамдар | Нәтиже |
|---|----------|----------|--------|
| L7 | Уроктар беті | /lessons → карточки | ✅ |
| L8 | Locked урок | Заблокированный урок — кнопка жоқ | ✅ |
| L9 | Урок ашу | /lesson/1 → content көрсетіледі | ✅ |
| L10 | Келесі урок | «Завершить урок» → prerequisite тексереді | ✅ |

---

## 3. Упражнения (Exercises)

### 3.1 API сценарийлері

| # | Сценарий | Эндпоинт | Күтілетін | Нәтиже |
|---|----------|----------|-----------|--------|
| E1 | Упражнения тізімі | GET /api/exercises/?lesson_id=1 | 200, массив | ✅ |
| E2 | Упражнение алу | GET /api/exercises/1 | 200, question + options | ✅ |
| E3 | Дұрыс жауап беру | POST /api/exercises/1/attempt {user_answer: "Сәлем"} | 200, is_correct: true | ✅ |
| E4 | Қате жауап беру | POST attempt {user_answer: "wrong"} | 200, is_correct: false | ✅ |
| E5 | Lesson prerequisite орындалмаған | GET exercise (locked lesson) | 403 | ✅ |

---

## 4. Тесттер (Tests)

### 4.1 API сценарийлері

| # | Сценарий | Эндпоинт | Күтілетін | Нәтиже |
|---|----------|----------|-----------|--------|
| T1 | Тесттер тізімі | GET /api/tests/?lesson_id=1 | 200, массив | ✅ |
| T2 | Тест сұрақтары | GET /api/tests/1/questions | 200, массив questions | ✅ |
| T3 | Тест бастау | POST /api/tests/1/attempt | 200, attempt_id | ✅ |
| T4 | Жауаптарды жіберу | POST /api/tests/attempts/{id}/submit | 200, score, passed | ✅ |
| T5 | Проходной балл 70% | 7/10 дұрыс | passed: true | ✅ |
| T6 | Проходной балл кем | 5/10 дұрыс | passed: false | ✅ |
| T7 | Teacher тест құру | POST /api/tests/ (teacher token) | 201 | ✅ |
| T8 | Student тест құру | POST /api/tests/ (student token) | 403 | ✅ |

---

## 5. Виртуальный помощник (Assistant)

**Әдіс:** Black-box тестілеу скрипті `scripts/test_assistant.py`  
**Нәтиже файлы:** `assistant_test_results.txt`

### 5.1 Сөздік сұрақтары (Vocabulary)

| # | Сұрақ | Контекст | Күтілетін | Нақты жауап | Нәтиже |
|---|-------|----------|-----------|-------------|--------|
| V1 | Что значит слово «сәлем»? | free | «сәлем» — привет | «сәлем» — привет | ✅ |
| V2 | Как переводится «рахмет»? | free | рақмет — спасибо | «рақмет» — спасибо | ✅ |
| V3 | Что означает «ана»? | free | ана — мать | «ана» — мать | ✅ |
| V4 | Перевод слова жақсы | free | жақсы — хороший | «жақсы» — хороший | ✅ |
| V5 | Что значит сәлем? | vocabulary | Перевод | «сәлем» — привет | ✅ |
| V6 | Что значит сәлем? | **test** | Переводчик бермейді | «Во время теста я объясняю только правила...» | ✅ |

### 5.2 Грамматикалық сұрақтар (Grammar)

| # | Сұрақ | Күтілетін | Нақты жауап | Нәтиже |
|---|-------|-----------|-------------|--------|
| G1 | Почему используется «мен»? | formal_informal правило | «сіз» и «сен» правилосы | ✅ |
| G2 | В чём разница между «сәлем» и «сәлеметсіз бе»? | Салыстыру | formal_informal правилосы | ✅ |
| G3 | Объясни правило про окончания | affixes правило | «Корень + окончания» | ✅ |
| G4 | Какой порядок слов в казахском? | word_order | «подлежащее, дополнение, глагол» | ✅ |

### 5.3 Фразалар (шектеулі)

| # | Сұрақ | Күтілетін | Нақты жауап | Нәтиже |
|---|-------|-----------|-------------|--------|
| G5 | Как сказать «я студент» по-казахски? | Жеке сөз сұрау | «Спросите о конкретном слове» | ✅ (шекті қолдау) |

### 5.4 Сабақ контексті (Lesson context)

| # | Сұрақ | Контекст | Нәтиже |
|---|-------|----------|--------|
| LC1 | Объясни урок про приветствия | lesson_id=2 | Цель урока из content | ✅ |
| LC2 | Что значит сәлем? | lesson_id=2 | Словарь + lesson атауы | ✅ |
| LC3 | Подскажи, не понимаю | lesson_id=2 | «Частые ошибки» бөлімі | ✅ |

### 5.5 Қате түсіндіру (Error explanation)

| # | Сұрақ | Контекст | Нәтиже |
|---|-------|----------|--------|
| ER1 | Почему это неправильно? | free | Grammar бөліміне сілтеме | ✅ |
| ER2 | В чём моя ошибка? | free | Подсказка, правильный жауап жоқ | ✅ |
| ER3 | Подскажи, не понимаю | **test** | Переводчик бермейді | ✅ |

### 5.6 Сыртқы сұрақтар (Out-of-scope)

| # | Сұрақ | Күтілетін | Нәтиже |
|---|-------|-----------|--------|
| O1 | Какая погода завтра? | Жауап бермейді | ✅ |
| O2 | Сколько лет президенту Казахстана? | Жауап бермейді | ✅ |

### 5.7 Жалпы сұрақтар

| # | Сұрақ | Нәтиже |
|---|-------|--------|
| GN1 | Привет | «Задайте вопрос о конкретном слове» | ✅ |
| GN2 | Помощь | Мысалдар мен нұсқаулар | ✅ |

### 5.8 Assistant тестілеу қорытындысы

| Категория | Барлығы | Өтті | % |
|-----------|---------|------|---|
| Vocabulary | 6 | 6 | 100% |
| Grammar | 5 | 5 | 100% |
| Lesson context | 3 | 3 | 100% |
| Error explanation | 3 | 3 | 100% |
| Out-of-scope | 2 | 2 | 100% |
| General | 2 | 2 | 100% |
| **Жалпы** | **22** | **22** | **100%** |

---

## 6. Сөздік (Vocabulary)

### 6.1 API сценарийлері

| # | Сценарий | Эндпоинт | Нәтиже |
|---|----------|----------|--------|
| VB1 | Сөздік тізімі | GET /api/vocabulary/ | 200 | ✅ |
| VB2 | Сөз қосу | POST /api/vocabulary/ {vocabulary_id, word_kz, ...} | 201 | ✅ |
| VB3 | Статусты жаңарту | PATCH /api/vocabulary/{id} {status: "learned"} | 200 | ✅ |
| VB4 | Сөзді өшіру | DELETE /api/vocabulary/{id} | 200 | ✅ |
| VB5 | Ойын сұрағы | GET /api/vocabulary/game/next | 200, vocab объекті | ✅ |
| VB6 | Ойын жауабы | POST /api/vocabulary/game/answer | 200, is_correct | ✅ |

---

## 7. Прогресс (Progress)

| # | Сценарий | Эндпоинт | Күтілетін | Нәтиже |
|---|----------|----------|-----------|--------|
| P1 | Прогресс сводкасы | GET /api/progress/summary | completed_lessons, test_passed, vocabulary_learned | ✅ |

---

## 8. Рекомендации

| # | Сценарий | Эндпоинт | Нәтиже |
|---|----------|----------|--------|
| R1 | Рекомендации тізімі | GET /api/recommendations/ | 200, массив | ✅ |
| R2 | Оқылды деп белгілеу | PATCH /api/recommendations/{id}/read | 200 | ✅ |

---

## 9. Файлдар (Import/Export) — Teacher/Admin

| # | Сценарий | Эндпоинт | Нәтиже |
|---|----------|----------|--------|
| F1 | Уроктарды импорттау | POST /api/files/import/lessons (JSON) | 200, imported count | ✅ |
| F2 | Сөздікті импорттау | POST /api/files/import/vocabulary (CSV) | 200, imported count | ✅ |
| F3 | Student импорт шақыруы | POST import (student token) | 403 | ✅ |

---

## 10. Логтар — Admin

| # | Сценарий | Эндпоинт | Нәтиже |
|---|----------|----------|--------|
| LG1 | Логтар тізімі | GET /api/logs/ | 200 (admin) | ✅ |
| LG2 | Student логтар шақыруы | GET /api/logs/ (student) | 403 | ✅ |

---

## 11. Жалпы қорытынды

### Өткен тесттер

| Модуль | Сценарийлер саны | Нәтиже |
|--------|------------------|--------|
| Auth | 8 | ✅ Барлығы өтті |
| Lessons | 10 | ✅ Барлығы өтті |
| Exercises | 5 | ✅ Барлығы өтті |
| Tests | 8 | ✅ Барлығы өтті |
| Assistant | 22 | ✅ Барлығы өтті |
| Vocabulary | 6 | ✅ Барлығы өтті |
| Progress | 1 | ✅ |
| Recommendations | 2 | ✅ |
| Files | 3 | ✅ |
| Logs | 2 | ✅ |
| **Жалпы** | **67** | **✅** |

### Тестілеу құралдары

- **Assistant:** `python -m scripts.test_assistant` → `assistant_test_results.txt`
- **API:** Swagger UI (http://localhost:8000/docs), Postman, curl
- **UI:** Ручное тестирование в браузере

### Ескертулер

1. Assistant — rule-based, LLM жоқ; фразалар толық қолдаулы емес.
2. Test mode — Переводчик ешқашан бермейді (дизайн бойынша).
3. Рольдер — student, teacher, admin; teacher/admin эндпоинттері тек сәйкес рөлдер үшін.
